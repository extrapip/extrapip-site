<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ExtraPip</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #0e0e10;
      color: white;
      display: flex;
      justify-content: center;
      padding: 40px 20px;
    }
    .card {
      background: #18181b;
      border-radius: 20px;
      padding: 40px;
      max-width: 480px;
      width: 100%;
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
      text-align: center;
      overflow: hidden;
    }
    h1 { font-size: 2.6rem; margin-bottom: 10px; }
    .live-indicator {
      display: inline-block;
      background: #e91916;
      color: white;
      padding: 6px 14px;
      border-radius: 999px;
      font-size: 0.9rem;
      font-weight: bold;
      margin-top: 6px;
      display: none;
    }
    .links { margin-top: 30px; display: flex; flex-direction: column; gap: 15px; }
    a.link-btn {
      background: #9146ff;
      padding: 15px;
      border-radius: 14px;
      color: white;
      text-decoration: none;
      font-size: 1.2rem;
      transition: 0.2s;
    }
    a.link-btn:hover { background: #772ce8; }

    /* Sliding animation */
    .slide-in {
      animation: slideIn 0.6s ease forwards;
      opacity: 0;
      transform: translateY(30px);
    }
    @keyframes slideIn {
      to { opacity: 1; transform: translateY(0); }
    }

    /* Loading spinner */
    .spinner {
      margin: 20px auto;
      border: 4px solid rgba(255,255,255,0.2);
      border-top: 4px solid #9146ff;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      display: none;
    }
    @keyframes spin { 100% { transform: rotate(360deg); }}

    /* Offline banner */
    .offline-banner {
      background: #2c2c30;
      padding: 15px;
      border-radius: 14px;
      margin-top: 20px;
      display: none;
      font-size: 1.1rem;
      opacity: 0.8;
    }

    /* Schedule block */
    .schedule {
      margin-top: 20px;
      background: #202024;
      padding: 15px;
      border-radius: 14px;
      font-size: 1rem;
      opacity: 0.9;
      display: none;
    }
  </style>
</head>
<body>

  <div class="card">
    <h1>ExtraPip</h1>
    <div id="liveTag" class="live-indicator">LIVE NOW</div>

    <!-- Loading spinner -->
    <div id="spinner" class="spinner"></div>

    <!-- Twitch embed container -->
    <div id="twitch-embed" style="display:none; margin-top:30px;"></div>

    <!-- Offline banner -->
    <div id="offlineBanner" class="offline-banner">Extrapip is currently offline.</div>

    <!-- Schedule section -->
    <div id="schedule" class="schedule">
      <strong>Stream Schedule:</strong><br>
      • Saturdays @ 1:30 PM EST<br>
      • Sundays   @ 1:30 PM EST<br>
      (Subject to change — check discord updates)
    </div>

    <div class="links">
      <a class="link-btn" href="https://twitch.tv/extrapip" target="_blank">Twitch</a>
      <a class="link-btn" href="https://www.youtube.com/@extrapip">YouTube</a>
      <a class="link-btn" href="https://twitter.com/extra_pip">Twitter/X</a>
      <a class="link-btn" href="https://www.tiktok.com/@extrapip">TikTok</a>
      <a class="link-btn" href="https://discord.gg/6nSNfQpEmW">Discord</a>
    </div>
  </div>

  <script src="https://player.twitch.tv/js/embed/v1.js"></script>
  <script>
    var liveTag = document.getElementById("liveTag");
    var embedContainer = document.getElementById("twitch-embed");
    var spinner = document.getElementById("spinner");
    var offlineBanner = document.getElementById("offlineBanner");
    var schedule = document.getElementById("schedule");

    spinner.style.display = "block";

    var player = new Twitch.Player("twitch-embed", {
      channel: "extrapip",
      parent: ["extrapip.com", "localhost"],
      width: "100%",
      height: 270,
      autoplay: false
    });

    player.addEventListener(Twitch.Player.ONLINE, function() {
      spinner.style.display = "none";
      offlineBanner.style.display = "none";
      schedule.style.display = "none";

      liveTag.style.display = "inline-block";
      embedContainer.style.display = "block";
      embedContainer.classList.add("slide-in");
    });

    player.addEventListener(Twitch.Player.OFFLINE, function() {
      spinner.style.display = "none";

      liveTag.style.display = "none";
      embedContainer.style.display = "none";

      offlineBanner.style.display = "block";
      schedule.style.display = "block";
    });

    // Default state while waiting for Twitch
    liveTag.style.display = "none";
    embedContainer.style.display = "none";
    offlineBanner.style.display = "none";
    schedule.style.display = "none";
  </script>

</body>
</html>
